<!-- build time:Mon Mar 28 2022 11:43:47 GMT+0800 (中国标准时间) --><!DOCTYPE html><html style="display:none" lang="zh"><head><meta charset="utf-8"><script>window.materialVersion="1.5.6",window.oldVersion=["codestartv1","1.3.4","1.4.0","1.4.0b1","1.5.0","1.5.2","1.5.5"]</script><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn1.lncld.net"><link rel="dns-prefetch" href="https://cdn1.lncld.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Linux 的输入输出重定向（转） | 帆的自留地</title><link rel="icon shortcut" type="image/ico" href="/img/logo-32x32.jpg"><link rel="icon" href="/img/logo-192x192.jpg"><meta name="format-detection" content="telephone=no"><meta name="description" itemprop="description" content="本文 转载 编辑自大佬 https://aimuke.github.io/linux/2019/05/29/redirect/ 的文章因为这两天我按照学校课程进行 Linux 实验的时候，发现教科书上说的 Linux 输入输出重定向好像根本行不通。看了各种资料，越看越稀里糊涂。直到看到这一篇，秒懂（奥力给！！）"><meta name="keywords" content="博客,代码,学习,程序,大学,Linux"><meta name="theme-color" content="#1e69bf"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]--><script>!function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}},lsloader.removeLS=function(e){try{localStorage.removeItem(e)}catch(t){}},lsloader.setLS=function(e,t){try{localStorage.setItem(e,t)}catch(n){}},lsloader.getLS=function(e){var t="";try{t=localStorage.getItem(e)}catch(n){t=""}return t},versionString="/*"+(window.materialVersion||"unknownVersion")+"*/",lsloader.clean=function(){try{for(var e=[],t=0;t<localStorage.length;t++)e.push(localStorage.key(t));e.forEach(function(e){var t=lsloader.getLS(e);if(window.oldVersion){var n=window.oldVersion.reduce(function(e,n){return e||-1!==t.indexOf("/*"+n+"*/")},!1);n&&lsloader.removeLS(e)}})}catch(n){}},lsloader.clean(),lsloader.load=function(e,t,n,s){"boolean"==typeof n&&(s=n,n=void 0),s=s||!1,n=n||function(){};var a;if(a=this.getLS(e),a&&-1===a.indexOf(versionString))return this.removeLS(e),void this.requestResource(e,t,n,s);if(a){var o=a.split(versionString)[0];if(o!=t)return console.log("reload:"+t),this.removeLS(e),void this.requestResource(e,t,n,s);a=a.split(versionString)[1],s?(this.jsRunSequence.push({name:e,code:a}),this.runjs(t,e,a)):(document.getElementById(e).appendChild(document.createTextNode(a)),n())}else this.requestResource(e,t,n,s)},lsloader.requestResource=function(e,t,n,s){var a=this;s?this.iojs(t,e,function(e,t,n){a.setLS(t,e+versionString+n),a.runjs(e,t,n)}):this.iocss(t,e,function(n){document.getElementById(e).appendChild(document.createTextNode(n)),a.setLS(e,t+versionString+n)},n)},lsloader.iojs=function(e,t,n){var s=this;s.jsRunSequence.push({name:t,code:""});try{var a=new XMLHttpRequest;a.open("get",e,!0),a.onreadystatechange=function(){if(4==a.readyState){if((a.status>=200&&a.status<300||304==a.status)&&""!=a.response)return void n(e,t,a.response);s.jsfallback(e,t)}},a.send(null)}catch(o){s.jsfallback(e,t)}},lsloader.iocss=function(e,t,n,s){var a=this;try{var o=new XMLHttpRequest;o.open("get",e,!0),o.onreadystatechange=function(){if(4==o.readyState){if((o.status>=200&&o.status<300||304==o.status)&&""!=o.response)return n(o.response),void s();a.cssfallback(e,t,s)}},o.send(null)}catch(r){a.cssfallback(e,t,s)}},lsloader.iofonts=function(e,t,n,s){var a=this;try{var o=new XMLHttpRequest;o.open("get",e,!0),o.onreadystatechange=function(){if(4==o.readyState){if((o.status>=200&&o.status<300||304==o.status)&&""!=o.response)return n(o.response),void s();a.cssfallback(e,t,s)}},o.send(null)}catch(r){a.cssfallback(e,t,s)}},lsloader.runjs=function(e,t,n){if(t&&n)for(var s in this.jsRunSequence)this.jsRunSequence[s].name==t&&(this.jsRunSequence[s].code=n);if(this.jsRunSequence[0]&&this.jsRunSequence[0].code&&"failed"!=this.jsRunSequence[0].status){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code)),a.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(a),this.jsRunSequence.shift(),this.jsRunSequence.length>0&&this.runjs()}else if(this.jsRunSequence[0]&&"failed"==this.jsRunSequence[0].status){var o=this,a=document.createElement("script");a.src=this.jsRunSequence[0].path,a.type="text/javascript",this.jsRunSequence[0].status="loading",a.onload=function(){o.jsRunSequence.shift(),o.jsRunSequence.length>0&&o.runjs()},document.body.appendChild(a)}},lsloader.tagLoad=function(e,t){this.jsRunSequence.push({name:t,code:"",path:e,status:"failed"}),this.runjs()},lsloader.jsfallback=function(e,t){if(!this.jsnamemap[t]){this.jsnamemap[t]=t;for(var n in this.jsRunSequence)this.jsRunSequence[n].name==t&&(this.jsRunSequence[n].code="",this.jsRunSequence[n].status="failed",this.jsRunSequence[n].path=e);this.runjs()}},lsloader.cssfallback=function(e,t,n){if(!this.cssnamemap[t]){this.cssnamemap[t]=1;var s=document.createElement("link");s.type="text/css",s.href=e,s.rel="stylesheet",s.onload=s.onerror=n;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}},lsloader.runInlineScript=function(e,t){var n=document.getElementById(t).innerText;this.jsRunSequence.push({name:e,code:n}),this.runjs()}}()</script><script>function Queue(){function e(e){this.debug&&console.log("Offered a Queued Function."),"function"==typeof e?this.dataStore.push(e):console.log("You must offer a function.")}function t(){return this.debug&&console.log("Polled a Queued Function."),this.dataStore.shift()}function o(){var e=this.poll();void 0!==e&&(this.debug&&console.log("Run a Queued Function."),e())}function u(){this.debug=!0}this.dataStore=[],this.offer=e,this.poll=t,this.execNext=o,this.debug=!1,this.startDebug=u}var queue=new Queue</script><style id="material_css"></style><script>"undefined"==typeof window.lsLoadCSSMaxNums&&(window.lsLoadCSSMaxNums=0),window.lsLoadCSSMaxNums++,lsloader.load("material_css","/css/material.min.css?lfwTSCk5dU0gSgC//hS81g==",function(){"undefined"==typeof window.lsLoadCSSNums&&(window.lsLoadCSSNums=0),window.lsLoadCSSNums++,window.lsLoadCSSNums==window.lsLoadCSSMaxNums&&(document.documentElement.style.display="")},!1)</script><style id="style_css"></style><script>"undefined"==typeof window.lsLoadCSSMaxNums&&(window.lsLoadCSSMaxNums=0),window.lsLoadCSSMaxNums++,lsloader.load("style_css","/css/style.min.css?vOFJu+pZl+0Eeqi7pGRHyw==",function(){"undefined"==typeof window.lsLoadCSSNums&&(window.lsLoadCSSNums=0),window.lsLoadCSSNums++,window.lsLoadCSSNums==window.lsLoadCSSMaxNums&&(document.documentElement.style.display="")},!1)</script><style id="prettify_css"></style><script>"undefined"==typeof window.lsLoadCSSMaxNums&&(window.lsLoadCSSMaxNums=0),window.lsLoadCSSMaxNums++,lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){"undefined"==typeof window.lsLoadCSSNums&&(window.lsLoadCSSNums=0),window.lsLoadCSSNums++,window.lsLoadCSSNums==window.lsLoadCSSMaxNums&&(document.documentElement.style.display="")},!1)</script><style id="prettify_theme"></style><script>"undefined"==typeof window.lsLoadCSSMaxNums&&(window.lsLoadCSSMaxNums=0),window.lsLoadCSSMaxNums++,lsloader.load("prettify_theme","/css/prettify/atelier-cave-dark.min.css?P8HZcYCbr9fq5dAvzZGnUQ==",function(){"undefined"==typeof window.lsLoadCSSNums&&(window.lsLoadCSSNums=0),window.lsLoadCSSNums++,window.lsLoadCSSNums==window.lsLoadCSSMaxNums&&(document.documentElement.style.display="")},!1)</script><style>body,html{font-family:Roboto,"Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif;overflow-x:hidden!important}code{font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace}a{color:#0158bc}#scheme-Paradox .hot_tags-count,#scheme-Paradox .sidebar-colored .sidebar-badge,#scheme-Paradox .sidebar-colored .sidebar-header,#scheme-Paradox .sidebar_archives-count,#search-form-label:after,#search-label,.mdl-card__media{background-color:#1e69bf!important}#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus,#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover{color:#1e69bf!important}#ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a,#post_entry-right-info,.sidebar-colored .sidebar-nav li:hover>a,.sidebar-colored .sidebar-nav li:hover>a i,.sidebar-colored .sidebar-nav li>a:focus i,.sidebar-colored .sidebar-nav li>a:hover,.sidebar-colored .sidebar-nav li>a:hover i,.sidebar-colored .sidebar-nav>.open>a,.sidebar-colored .sidebar-nav>.open>a:focus,.sidebar-colored .sidebar-nav>.open>a:hover{color:#1e69bf!important}.toTop{background:#6baaf2!important}.material-layout .material-index>.material-nav,.material-layout .material-post>.material-nav,.material-nav a{color:#6baaf2}#scheme-Paradox .MD-burger-layer{background-color:#6baaf2}#scheme-Paradox #post-toc-trigger-btn{color:#6baaf2}.post-toc a:hover{color:#0158bc;text-decoration:underline}</style><style>body{background-image:url(/img/bg.jpg)}</style><style>.fade{transition:all .8s linear;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0);opacity:1}.fade.out{opacity:0}</style><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"><style id="material_icons"></style><script>"undefined"==typeof window.lsLoadCSSMaxNums&&(window.lsLoadCSSMaxNums=0),window.lsLoadCSSMaxNums++,lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){"undefined"==typeof window.lsLoadCSSNums&&(window.lsLoadCSSNums=0),window.lsLoadCSSNums++,window.lsLoadCSSNums==window.lsLoadCSSMaxNums&&(document.documentElement.style.display="")},!1)</script><script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==",!0)</script><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="帆的自留地"><meta name="msapplication-starturl" content="https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/"><meta name="msapplication-navbutton-color" content="#1e69bf"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="帆的自留地"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/img/logo-180x180.jpg"><link rel="alternate" type="application/atom+xml" href="feed.xml"><meta property="og:url" content="https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/"><meta property="og:type" content="blog"><meta property="og:title" content="Linux 的输入输出重定向（转） | 帆的自留地"><meta property="og:image" content="/img/logo-192x192.jpg"><meta property="og:description" content="本文 转载 编辑自大佬 https://aimuke.github.io/linux/2019/05/29/redirect/ 的文章因为这两天我按照学校课程进行 Linux 实验的时候，发现教科书上说的 Linux 输入输出重定向好像根本行不通。看了各种资料，越看越稀里糊涂。直到看到这一篇，秒懂（奥力给！！）"><meta property="og:article:tag" content="Linux"><meta property="article:published_time" content="Thu Oct 15 2020 16:12:11 GMT+0800"><meta property="article:modified_time" content="Sun May 23 2021 13:28:44 GMT+0800"><meta name="twitter:card" content="summary_large_image"><link rel="canonical" href="https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html"><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html",
    "headline": "Linux 的输入输出重定向（转）",
    "datePublished": "Thu Oct 15 2020 16:12:11 GMT+0800",
    "dateModified": "Sun May 23 2021 13:28:44 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "EmptinessBoy",
        "image": {
            "@type": "ImageObject",
            "url": "/img/fav_300.png"
        },
        "description": "啥都不会，<br>专业制造BUG的<br>学渣一枚<br><br>"
    },
    "publisher": {
        "@type": "Organization",
        "name": "帆的自留地",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/logo-192x192.jpg"
        }
    },
    "keywords": ",Linux博客,代码,学习,程序,大学",
    "description": "本文 转载 编辑自大佬 https://aimuke.github.io/linux/2019/05/29/redirect/ 的文章因为这两天我按照学校课程进行 Linux 实验的时候，发现教科书上说的 Linux 输入输出重定向好像根本行不通。看了各种资料，越看越稀里糊涂。直到看到这一篇，秒懂（奥力给！！）",
}</script><script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-85449259-2","auto"),ga("send","pageview")</script><meta name="generator" content="Hexo 4.2.0"></head><body id="scheme-Paradox" class="lazy"><div class="material-layout mdl-js-layout has-drawer is-upgraded"><main class="material-layout__content" id="main"><div id="top"></div><button class="MD-burger-icon sidebar-toggle"><span id="MD-burger-id" class="MD-burger-layer"></span></button> <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon"><i class="material-icons">format_list_numbered</i></button><ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh;overflow-y:scroll"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#shell-重定向介绍"><span class="post-toc-number">1.</span> <span class="post-toc-text">shell 重定向介绍</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#文件描述符"><span class="post-toc-number">2.</span> <span class="post-toc-text">文件描述符</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#输入输出重定向"><span class="post-toc-number">3.</span> <span class="post-toc-text">输入输出重定向</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出重定向-gt-和-gt-gt"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">输出重定向 &gt; 和 &gt;&gt;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输入重定向-lt"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">输入重定向 &lt;</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CAT-命令简单解析"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">CAT 命令简单解析</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CAT-演示输出重定向"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">CAT 演示输出重定向</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#高级用法"><span class="post-toc-number">4.</span> <span class="post-toc-text">高级用法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#重定向绑定"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">重定向绑定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#nohup结合"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">nohup结合</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#辨析"><span class="post-toc-number">5.</span> <span class="post-toc-text">辨析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#gt-file-2-gt-amp-1-和-2-gt-amp-1-gt-file-的区别"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">&gt;file 2&gt;&amp;1 和 2&gt;&amp;1 &gt;file 的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#gt-file-2-gt-amp-1-和-gt-file-2-gt-file-区别"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">&gt;file 2&gt;&amp;1 和 &gt;file 2&gt;file 区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原因分析"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">原因分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#为何-2-gt-amp-1-要写在后面？"><span class="post-toc-number">5.3.1.</span> <span class="post-toc-text">为何 2&gt;&amp;1 要写在后面？</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#小问题"><span class="post-toc-number">5.3.2.</span> <span class="post-toc-text">小问题</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#dev-null"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">&#x2F;dev&#x2F;null</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#存在的意义："><span class="post-toc-number">5.4.1.</span> <span class="post-toc-text">存在的意义：</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#关闭文件描述符"><span class="post-toc-number">6.</span> <span class="post-toc-text">关闭文件描述符</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#总结"><span class="post-toc-number">7.</span> <span class="post-toc-text">总结</span></a></li></ol></ul><div class="material-post_container"><div class="material-post mdl-grid"><div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col"><div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(https://media.everdo.cn/tank/pic-bed/2020/10/15/bash.jpg)"><p class="article-headline-p">Linux 的输入输出重定向（转）</p></div><div class="mdl-color-text--grey-700 mdl-card__supporting-text meta"><div id="author-avatar"><img src="/img/fav_300.png" width="44px" height="44px" alt="Author Avatar"></div><div><strong>EmptinessBoy</strong> <span>10月 15, 2020</span></div><div class="section-spacer"></div><button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class="material-icons" role="presentation">devices other</i> <span class="visuallyhidden">devices other</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button"><li class="mdl-menu__item">在其它设备中阅读本文章</li><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVYAAAFWCAAAAAAXxOpfAAAFcElEQVR42u3ay44iQQwEQP7/p2evK62WybSbGaqJOiFEPyqKQ8r248t6wXogwIoVq4UVK1YLK1asFtajWB/xen7V39//75f5tfn7/PvE598nvxmaYMWKFStWrMeyto9PNtNyP99e8j7tAeT3j0ywYsWKFSvWw1l/Pvo8v3YTpJJ7Jn+a4pCwYsWKFSvWj2FtUTbRLS/fXHVsWLFixYoVK9a2aPL8Dvkm8+j2/Fl5K2UTAbFixYoVK9Y7sSYxaBaANq+bhLbkONu7/WgvCytWrFixYv1V1lkr5d6fLxjExIoVK1asWN+etV15C6QdfZiVP2ZYSXCsZbBixYoVK9YDWfNgMaNPGjB54GvfYcPdvgNWrFixYsV6ImsSnjYNmKtaJnkBKAlMeeBLDgkrVqxYsWI9nTXfTFtwSbjz584GPhLidkwkClhYsWLFihXrsaybR+ZjDUnMmo1pzho/eTjDihUrVqxY78TaBpcNRx6G8u21h52HyAsGMbFixYoVK9Y3Zp0NJuZbmo1XbmJcOxoyG+PAihUrVqxY78SajxrkRZl9CGsbPMNmSfm3iEotWLFixYoV6yGsbQNmE4DaONVuflPi+VovrFixYsWK9VzWtjkxK2rkIWy/7aTEc1UxCCtWrFixYj2XtR1tnG11Fps25Y/NaObsmLFixYoVK9YTWfcDFnmEap8yKwnNxinaOIUVK1asWLHej3XfzGjLFvm2vylzlA2hH+1lYcWKFStWrIew7iNIUhZpoWeHNwuIF/eysGLFihUr1gNZ2zbJvvWyIW6PIWnD5NENK1asWLFiPZ11Fp7aWPOT0WdTymlxsWLFihUr1tNZZzRR6WFElh9e3oCZNXLasRKsWLFixYr1XNb8wQlijj5r4eTlmE1DJYliWLFixYoV671Zn7/KpgVyLUFdFlmXkKJeFlasWLFixfr2rO1W982Ylq+NU/thjrzYhBUrVqxYsZ7O2rYZ2jZGy9Q+d0bcHnP05lixYsWKFeuBrLMhhnZjrx6euCo2tY0frFixYsWK9XTWWYslj2ibAYtZGeWqpkv9PVasWLFixXos66wM0bYx9oWS9vDyt83bP/+9D1asWLFixXog61Xx4nl7YzZqmUDMxjjyiFYcA1asWLFixXoL1rZ40VK2hZV8w3lMzFs+hRJWrFixYsV6IGu7pX0Iyxsws8ZPXmqZDX9gxYoVK1asd2LdD0S2TNc2VPIhj1kDpigVYcWKFStWrAeytmWI9trNyMVsKDM5qv03WLFixYoV611Zk/GFGXfedMmfPruqbSxFR44VK1asWLEey7oZUJgVOzb3ae+Z73c2dIIVK1asWLGey7ofZZg1NjYBqC2g5IWY2QFgxYoVK1as92DdlCRmBZQkvuQtkBYuD3DJnwYrVqxYsWK9B+usqJHEqRaxaHgsxkZnb4IVK1asWLHeg/UVwxb7rW7iTtEmuegwsGLFihUr1nNZZ8MTM4i8PTMr4mzaOcnu6tyKFStWrFixvj3rZswi/2ZWoMlDWDvkkX/GihUrVqxYP4E1jyBtSMrD1mO08iOZxcqixIMVK1asWLHegrVFn21pc1W+4bZItGrhYMWKFStWrAeyzqJM3mLZjHe0lDnBrCjzzVFhxYoVK1asx7K2wxCz181LM5tINBvpmBVlsGLFihUr1juxJs2GPAC1B7Nvt7SH+lisImBhxYoVK1asH8O6b67kWLPYl8SmYYDDihUrVqxYP4b1dREnb+pcVRJqx01eWGrBihUrVqxYf5U1v/WseNG2QzbFndm17W+wYsWKFSvWe7DmbYZNcyLfRjtMmUe3/PDyYIcVK1asWLGey2pdtbBixYrVwooVq4UVK1YL69uvP8OETQh3qnbBAAAAAElFTkSuQmCC"></ul><button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class="material-icons" role="presentation">bookmark</i> <span class="visuallyhidden">bookmark</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button"><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul><button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class="material-icons" role="presentation">share</i> <span class="visuallyhidden">share</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button"><a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Linux 的输入输出重定向（转）&url=https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html&pic=https://coding.emptinessboy.com/img/logo-32x32.jpg&searchPic=false&style=simple" target="_blank"><li class="mdl-menu__item">分享到微博</li></a><a class="post_share-link" href="https://twitter.com/intent/tweet?text=Linux 的输入输出重定向（转）&url=https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html&via=EmptinessBoy" target="_blank"><li class="mdl-menu__item">分享到 Twitter</li></a><a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html" target="_blank"><li class="mdl-menu__item">分享到 Facebook</li></a><a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=帆的自留地&title=Linux 的输入输出重定向（转）&summary=晓帆的学习笔记&pics=https://coding.emptinessboy.com/img/logo-32x32.jpg&url=https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html" target="_blank"><li class="mdl-menu__item">分享到 QQ</li></a><a class="post_share-link" href="https://telegram.me/share/url?url=https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/index.html&text=Linux 的输入输出重定向（转）" target="_blank"><li class="mdl-menu__item">分享到 Telegram</li></a></ul></div><div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out"><blockquote><p>本文 <strong>转载</strong> 编辑自大佬 <a href="https://aimuke.github.io/linux/2019/05/29/redirect/" target="_blank" rel="noopener">https://aimuke.github.io/linux/2019/05/29/redirect/</a> 的文章</p><p>因为这两天我按照学校课程进行 Linux 实验的时候，发现教科书上说的 Linux 输入输出重定向好像根本行不通。看了各种资料，越看越稀里糊涂。直到看到这一篇，秒懂（奥力给！！）</p></blockquote><a id="more"></a><p><code>&gt;/dev/null 2&gt;&amp;1</code> 含义</p><ul><li><code>/dev/null</code> ：代表空设备文件</li><li><code>&gt;</code> ：代表重定向到哪里，例如：<code>echo &quot;123&quot; &gt; /home/123.txt</code></li><li><code>1</code> ：表示stdout标准输出，系统默认值是 <code>1</code>，所以 <code>&gt;/dev/null</code> 等同于 <code>1&gt;/dev/null</code></li><li><code>2</code> ：表示stderr标准错误</li><li><code>&amp;</code> ：表示等同于的意思，<code>2&gt;&amp;1</code>，表示 <code>2</code> 的输出重定向等同于 <code>1</code></li></ul><p><code>&gt;/dev/null 2&gt;&amp;1</code> 语句含义：</p><ul><li><code>&gt;/dev/null</code> ： 首先表示标准输出重定向到空设备文件，也就是不输出任何信息到终端，说白了就是不显示任何信息。</li><li><code>2&gt;&amp;1</code> ：接着，标准错误输出重定向（等同于）标准输出，因为之前标准输出已经重定向到了空设备文件，所以标准错误输出也重定向到空设备文件。</li></ul><h2 id="shell-重定向介绍"><a href="#shell-重定向介绍" class="headerlink" title="shell 重定向介绍"></a>shell 重定向介绍</h2><p>就像我们平时写的程序一样，一段程序会处理外部的输入，然后将运算结果输出到指定的位置。在交互式的程序中，输入来自用户的键盘和鼠标，结果输出到用户的屏幕，甚至播放设备中。而对于某些后台运行的程序，输入可能来自于外部的一些文件，运算的结果通常又写到其他的文件中。而且程序在运行的过程中，会有一些关键性的信息，比如异常堆栈，外部接口调用情况等，这些都会统统写到日志文件里。</p><p>shell 脚本也一样，但是我们一般在使用 shell 命令的时候，更多地还是通过键盘输入，然后在屏幕上查看命令的执行结果。如果某些情况下，我们需要将 shell 命令的执行结果存储到文件中，那么我们就需要使用输入输出的重定向功能。</p><h2 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h2><blockquote><p>文件描述符是与文件输入、输出关联的整数。它们用来跟踪已打开的文件。最常见的文件描述符是 stidin、stdout、和 stderr。我们可以将某个文件描述符的内容重定向到另外一个文件描述符中。</p></blockquote><p>当执行shell命令时，会默认打开3个文件，每个文件有对应的文件描述符来方便我们使用：</p><table><thead><tr><th align="left">类型</th><th align="left">文件描述符</th><th align="left">默认情况</th><th align="left">对应文件句柄位置</th></tr></thead><tbody><tr><td align="left">标准输入（standard input）</td><td align="left"><strong>0</strong></td><td align="left">从键盘获得输入</td><td align="left">/proc/slef/fd/0</td></tr><tr><td align="left">标准输出（standard output）</td><td align="left"><strong>1</strong></td><td align="left">输出到屏幕（即控制台）</td><td align="left">/proc/slef/fd/1</td></tr><tr><td align="left">错误输出（error output）</td><td align="left"><strong>2</strong></td><td align="left">输出到屏幕（即控制台）</td><td align="left">/proc/slef/fd/2</td></tr></tbody></table><p>所以我们平时在执行 shell 命令中，都默认是从键盘获得输入，并且将结果输出到控制台上。但是我们可以通过更改文件描述符默认的指向，从而实现输入输出的重定向。比如我们将 1 指向文件，那么标准的输出就会输出到文件中。</p><p><strong>输出描述符不指定时，默认值为 <code>1</code> , 输入不指定默认为 <code>0</code></strong>， 如:</p><pre><code class="sh">command &gt; file.txt
command 2&gt; 
command &lt; file</code></pre><p>等同于</p><pre><code class="sh">command 1&gt; file.txt
command 2&gt; 1
command 0&lt; file</code></pre><p><code>&amp;&gt; file</code> 将 <code>1</code> 和 <code>2</code> 都重定向到 <code>file</code></p><h2 id="输入输出重定向"><a href="#输入输出重定向" class="headerlink" title="输入输出重定向"></a>输入输出重定向</h2><h3 id="输出重定向-gt-和-gt-gt"><a href="#输出重定向-gt-和-gt-gt" class="headerlink" title="输出重定向 &gt; 和 &gt;&gt;"></a>输出重定向 &gt; 和 &gt;&gt;</h3><p>重定向操作符号有两个 <code>&gt;</code> 和 <code>&gt;&gt;</code> 。符号的左边表示文件描述符，<strong>如果没有的话表示<code>1</code>，也就是标准输出</strong>。符号的右边可以是一个文件，也可以是一个输出设备。</p><p>尽管这两个操作符都可以将重定向到文件，但是前者<code>&gt;</code>会先清空文件，再写入内容；后者<code>&gt;&gt;</code>会将内容追加到现有文件的尾部。（对了，重定向的操作制定的文件如果原来不存在的话，重定向的操作会主动创建这个文件名的文件的）</p><p>输出重定向的使用方式很简单，基本的一些命令如下：</p><table><thead><tr><th align="left">命令</th><th align="left">介绍</th></tr></thead><tbody><tr><td align="left">command &gt;filename</td><td align="left">把标准输出 重定向 到新文件中</td></tr><tr><td align="left">command 1&gt;filename</td><td align="left">同上</td></tr><tr><td align="left">command &gt;&gt;filename</td><td align="left">把标准输出 追加 到文件中</td></tr><tr><td align="left">command 1&gt;&gt;filename</td><td align="left">同上</td></tr><tr><td align="left">command 2&gt;filename</td><td align="left">把标准<strong>错误</strong> 重定向 到新文件中</td></tr><tr><td align="left">command 2&gt;&gt;filename</td><td align="left">把标准<strong>错误</strong> 追加 到新文件中</td></tr></tbody></table><p>为了更好地理解输出重定向，感受重定向的“魅力”，我们看一下以下的例子：我们创建一个测试目录，目录下面仅有一个 1.txt 文件。</p><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ echo &quot;123456&quot; &gt; 1.txt
[huxiaofan@huxiaofan-centos8 learn]$ ll
总用量 4
-rw-rw-r-- 1 huxiaofan huxiaofan 7 10月 15 03:22 1.txt

[huxiaofan@huxiaofan-centos8 learn]$ ls 1.txt 2.txt
ls: 无法访问 &#39;2.txt&#39;: 没有那个文件或目录
1.txt</code></pre><p>在我们执行 <code>ls 1.txt 2.txt</code> 之后，一共有两种输出，其中 ls: 无法访问 2.txt：没有那个文件或目录是错误输出，1.txt是标准输出。</p><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ ls 1.txt 2.txt 1&gt; out
ls: 无法访问&#39;2.txt&#39;: 没有那个文件或目录
[huxiaofan@huxiaofan-centos8 learn]$ cat out
1.txt


[huxiaofan@huxiaofan-centos8 learn]$ ls 1.txt 2.txt 1&gt;&gt; out
ls: 无法访问&#39;2.txt&#39;: 没有那个文件或目录
[huxiaofan@huxiaofan-centos8 learn]$ cat out
1.txt
1.txt</code></pre><p>在上述命令中，我们将<strong>原来的标准输出重定向到了 out 文件中</strong>，所以控制台只剩下了错误提示。并且当执行了追加操作时，out 文件的内容非但没有被清空，反而又多了一条 1.txt。</p><p>同理，我们也可以将错误输出重定向到文件中：</p><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ ls 1.txt 2.txt 2&gt;&gt; err
1.txt
[huxiaofan@huxiaofan-centos8 learn]$ cat err
ls: 无法访问&#39;2.txt&#39;: 没有那个文件或目录
[huxiaofan@huxiaofan-centos8 learn]$ 


[huxiaofan@huxiaofan-centos8 learn]$ ls 1.txt 2.txt 2&gt; err &gt; out
[huxiaofan@huxiaofan-centos8 learn]$ cat out
1.txt
[huxiaofan@huxiaofan-centos8 learn]$ cat err
ls: 无法访问&#39;2.txt&#39;: 没有那个文件或目录
[huxiaofan@huxiaofan-centos8 learn]$ </code></pre><p>看到这里，朋友们可能会发现 <code>&gt;out 2&gt;err</code> 和我们在一开头提到的 <code>&gt;/dev/null 2&gt;&amp;1</code> 已经很像了，别急，这待会再说。</p><pre><code class="sh">cmd &gt; output.txt 2&gt;&amp;1
cmd &amp;&gt; output.txt
cmd &gt;&amp; output.txt  #三个表达式效果一样哒~</code></pre><h3 id="输入重定向-lt"><a href="#输入重定向-lt" class="headerlink" title="输入重定向 &lt;"></a>输入重定向 &lt;</h3><p>在理解了输出重定向之后，理解输入重定向就会容易得多。对输入重定向的基本命令如下：</p><table><thead><tr><th align="left">命令</th><th align="left">介绍</th></tr></thead><tbody><tr><td align="left">command &lt;filename</td><td align="left">以 filename 文件作为标准输入</td></tr><tr><td align="left">command 0&lt;filename</td><td align="left">同上</td></tr><tr><td align="left">command &lt;&lt;delimiter</td><td align="left">从标准输入中读入，直到遇到 delimiter 分隔符</td></tr></tbody></table><p>我们使用 <code>&lt;</code> 对输入做重定向，如果符号左边没有写值，那么默认就是 <code>0</code>。</p><h4 id="CAT-命令简单解析"><a href="#CAT-命令简单解析" class="headerlink" title="CAT 命令简单解析"></a>CAT 命令简单解析</h4><p>我们这次以 <code>cat</code> 命令为例，如果 <code>cat</code> 后面没有跟文件名的话，那它的作用就是将标准输入（比如键盘）回显到标准输出（比如屏幕）上：</p><blockquote><p>补充：类似初学编程时的应声虫程序，你输入啥，它在屏幕上打印啥：</p></blockquote><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ cat
123
123
test
test</code></pre><p>我们可以将利用输入重定向，将我们在键盘上敲入的字符写入到文件中。我们需要使用 <code>ctrl+c</code> 来结束输入：</p><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ cat &gt;out
123
test
^C
[huxiaofan@huxiaofan-centos8 learn]$ cat out
123
test</code></pre><p>那么<code>&lt;&lt;</code>又是什么作用呢？我们再看：</p><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ cat &gt; out &lt;&lt; end
&gt; aaa
&gt; bbb
&gt; ccc
&gt; end
[huxiaofan@huxiaofan-centos8 learn]$ cat out
aaa
bbb
ccc
[huxiaofan@huxiaofan-centos8 learn]$ </code></pre><p>我们看到，当我们输入完<code>cat &gt;out &lt;&lt;end</code>，然后敲下回车之后，命令并没有结束，此时<code>cat</code>命令像一开始一样，等待你给它输入数据。然后当我们敲入<code>end</code>之后，cat命令就结束了。<code>end</code>之前输入的字符都已经被写入到了out文件中。这就是输入分割符的作用。</p><h4 id="CAT-演示输出重定向"><a href="#CAT-演示输出重定向" class="headerlink" title="CAT 演示输出重定向"></a>CAT 演示输出重定向</h4><p>好了，此时我们觉得自己在键盘上敲比较累，还是直接让 <code>cat</code> 读取一个文件吧。那么我们需要利用输入重定向：</p><pre><code class="sh"># 先清空 out 文件
[huxiaofan@huxiaofan-centos8 learn]$ echo &gt; out
[huxiaofan@huxiaofan-centos8 learn]$ cat out

[huxiaofan@huxiaofan-centos8 learn]$ echo -e  &quot;123\n456\n789&quot; &gt; input
[huxiaofan@huxiaofan-centos8 learn]$ cat input
123
456
789
[huxiaofan@huxiaofan-centos8 learn]$ cat &lt; input &gt; out
# 其实这一步效果相当于把 input 文件作为输入，输入到 cat 里，再输出到 out 文件
[huxiaofan@huxiaofan-centos8 learn]$ cat out
123
456
789
[huxiaofan@huxiaofan-centos8 learn]$ </code></pre><p>神奇的事情发生了，out文件里面的内容被替换成了input文件里的内容。</p><h2 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h2><h3 id="重定向绑定"><a href="#重定向绑定" class="headerlink" title="重定向绑定"></a>重定向绑定</h3><p>好了，在有了以上知识的基础上，我们再来看开头提到的 <code>&gt;/dev/null 2&gt;&amp;1</code>。这条命令其实分为两命令，一个是 <code>&gt;/dev/null</code>，另一个是 <code>2&gt;&amp;1</code>。</p><ul><li><p><code>&gt;/dev/null</code></p><p>这条命令的作用是将标准输出 <code>1</code> 重定向到 <code>/dev/null</code> 中。<code>/dev/null</code> 代表linux的空设备文件，所有往这个文件里面写入的内容都会丢失，俗称“黑洞”。那么执行了 <code>&gt;/dev/null</code> 之后，标准输出就会不再存在，没有任何地方能够找到输出的内容。</p></li><li><p><code>2&gt;&amp;1</code></p><p>这条命令用到了重定向绑定，采用 <code>&amp;</code> 可以将两个输出绑定在一起。这条命令的作用是错误输出将和标准输出同用一个文件描述符，说人话就是错误输出将会和标准输出输出到同一个地方。</p></li></ul><p>linux 在执行shell命令之前，就会确定好所有的输入输出位置，并且从左到右依次执行重定向的命令，所以 <code>&gt;/dev/null 2&gt;&amp;1</code> 的作用就是让标准输出重定向到 <code>/dev/null</code>中（丢弃标准输出），然后错误输出由于重用了标准输出的描述符，所以错误输出也被定向到了 <code>/dev/null</code> 中，错误输出同样也被丢弃了。执行了这条命令之后，<strong>该条shell命令将不会输出任何信息到控制台，也不会有任何信息输出到文件中</strong>。</p><h3 id="nohup结合"><a href="#nohup结合" class="headerlink" title="nohup结合"></a>nohup结合</h3><p>我们经常使用 <code>nohup command &amp;命令</code> 形式来启动一些后台程序，比如一些 java 服务：</p><pre><code class="sh"># nohup java -jar xxxx.jar &amp;</code></pre><p>为了不让一些执行信息输出到前台（控制台），我们还会加上刚才提到的 <code>&gt;/dev/null 2&gt;&amp;1</code> 命令来丢弃所有的输出：</p><pre><code class="sh"># nohup java -jar xxxx.jar &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre><h2 id="辨析"><a href="#辨析" class="headerlink" title="辨析"></a>辨析</h2><h3 id="gt-file-2-gt-amp-1-和-2-gt-amp-1-gt-file-的区别"><a href="#gt-file-2-gt-amp-1-和-2-gt-amp-1-gt-file-的区别" class="headerlink" title="&gt;file 2&gt;&amp;1 和 2&gt;&amp;1 &gt;file 的区别"></a><code>&gt;file 2&gt;&amp;1</code> 和 <code>2&gt;&amp;1 &gt;file</code> 的区别</h3><p>再回到文章的开头，我说我弄反了 <code>&gt;file</code> 和 <code>2&gt;&amp;1</code> 拼装的顺序，导致出了一点小问题。乍眼看这两条命令貌似是等同的，但其实大为不同。刚才提到了，linux 在执行 shell 命令之前，就会确定好所有的输入输出位置，并且从左到右依次执行重定向的命令。那么我们同样从左到右地来分析 <code>2&gt;&amp;1 &gt;file</code>：</p><ul><li><p><code>2&gt;&amp;1</code>，将错误输出绑定到标准输出上。由于此时的标准输出是默认值，也就是输出到屏幕，所以错误输出会输出到屏幕。</p></li><li><p><code>&gt;file</code>，将标准输出<code>1</code>重定向到file中。</p></li></ul><p>我们用一个表格来更好地说明这两条命令的区别：</p><table><thead><tr><th align="left">命令</th><th align="left">标准输出</th><th align="left">错误输出</th></tr></thead><tbody><tr><td align="left">&gt;file 2&gt;&amp;1</td><td align="left">file</td><td align="left">file</td></tr><tr><td align="left">2&gt;&amp;1 &gt;file</td><td align="left">file</td><td align="left">屏幕</td></tr></tbody></table><h3 id="gt-file-2-gt-amp-1-和-gt-file-2-gt-file-区别"><a href="#gt-file-2-gt-amp-1-和-gt-file-2-gt-file-区别" class="headerlink" title="&gt;file 2&gt;&amp;1 和 &gt;file 2&gt;file 区别"></a><code>&gt;file 2&gt;&amp;1</code> 和 <code>&gt;file 2&gt;file</code> 区别</h3><p>那么可能会有些同学会疑问，为什么要用重定向绑定，而不是像 <code>&gt;file 2&gt;file</code> 这样子重复一遍呢。</p><p>为了回答这个问题，我们回到刚才介绍输出重定向的场景。我们尝试将标准输出和错误输出都定向到out文件中：</p><pre><code class="sh">[huxiaofan@huxiaofan-centos8 learn]$ ls 1.txt 2.txt &gt;out 2&gt;out

[huxiaofan@huxiaofan-centos8 learn]$ cat out
a.txt
�法访问b.txt: 没有那个文件或目录</code></pre><p>WTF？竟然出现了乱码，这是为啥呢？这是因为 <strong>采用这种写法，标准输出和错误输出会抢占往 out 文件的管道</strong>，所以可能会导致输出内容的时候出现缺失、覆盖等情况。现在是出现了乱码，有时候也有可能出现只有 error 信息或者只有正常信息的情况。不管怎么说，采用这种写法，最后的情况是无法预估的。</p><p>而且，由于 out 文件被打开了两次，两个文件描述符会抢占性的往文件中输出内容，所以整体 IO 效率不如 &gt;file 2&gt;&amp;1 来得高。</p><h3 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h3><p>首先 <code>&gt; file 2&gt;file</code> 的意思是将命令所产生的标准输出信息，和错误的输出信息送到file 中。<code>&gt; file 2&gt;file</code> 这样的写法，stdout 和 stderr都直接送到 file 中，file 会被打开两次,这样 stdout 和 stderr 会互相覆盖，这样写相当使用了 FD1 和 FD2 两个同时去抢占file 的管道。</p><p>而 <code>&gt;file 2&gt;&amp;1</code> 这条命令就将 stdout 直接送向 file, <strong>stderr 继承了 FD1 管道后</strong>，再被送往 file。此时，file 只被打开了一次，也只使用了一个管道 FD1，它包括了 stdout 和 stderr 的内容。</p><p>从 IO 效率上,前一条命令的效率要比后面一条的命令效率要低,所以在编写 shell 脚本的时候,较多的时候我们会 <code>command &gt; file 2&gt;&amp;1</code> 这样的写法。</p><h4 id="为何-2-gt-amp-1-要写在后面？"><a href="#为何-2-gt-amp-1-要写在后面？" class="headerlink" title="为何 2&gt;&amp;1 要写在后面？"></a>为何 <code>2&gt;&amp;1</code> 要写在后面？</h4><pre><code class="sh">command &gt; file 2&gt;&amp;1 </code></pre><p>首先是 <code>command &gt; file</code> 将标准输出重定向到file中， <code>2&gt;&amp;1</code> 是标准错误拷贝了标准输出的行为，也就是同样被重定向到file中，最终结果就是标准输出和错误都被重定向到file中。</p><pre><code class="sh">command 2&gt;&amp;1 &gt;file </code></pre><p><code>2&gt;&amp;1</code> 标准错误拷贝了标准输出的行为，但此时标准输出还是在终端。<code>&gt;file</code> 后输出才被重定向到file，但标准错误仍然保持在终端。</p><p>用strace可以看到：</p><ol><li><code>command &gt; file 2&gt;&amp;1</code> 这个命令中实现重定向的关键系统调用序列是：<pre><code class="sh">open(file) == 3 
dup2(3,1) 
dup2(1,2)</code></pre></li><li><code>command 2&gt;&amp;1 &gt;file</code> 这个命令中实现重定向的关键系统调用序列是：<pre><code class="sh">dup2(1,2) 
open(file) == 3 
dup2(3,1)</code></pre>可以考虑一下不同的 <code>dup2()</code> 调用序列会产生怎样的文件共享结构。请参考APUE 3.10, 3.12</li></ol><h4 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h4><p>接着本文的场景，下面命令，错误输出会输出到什么地方呢？同学们可以在评论区留言回答哦~</p><pre><code class="sh"># ls a.txt b.txt 2&gt;&amp;1 &gt;/dev/null 2&gt;&amp;1</code></pre><h3 id="dev-null"><a href="#dev-null" class="headerlink" title="/dev/null"></a>/dev/null</h3><blockquote><p><code>/dev/null</code> 是一个特殊的设备文件，这个文件接收到的任何数据都会被丢弃。因此，null这个设备通常也被成为位桶（bit bucket）或黑洞。</p><p>《linux shell脚本攻略》<br>简单地理解就是，重定向操作给这个 <code>/dev/null</code> 文件的所有东西都会被丢弃。</p></blockquote><p>因为这些文件描述符输出的字符串，总是会显示出来的。如果我们在 shell 编程的时候，操作到某一条命令的返回结果，我们不想要这个时候又不想让这个输出结果打印到屏幕上（打印错误，多不好看对不对 ^_^）我们就可以重定向到 <code>/dev/null</code> 这个文件来，由 <code>/dev/null</code> 这个文件负责处理后事。这个丢弃的结果又不能粗暴的认为是删除错误输出，这个操作是一个丢弃重定向输入输出的操作。</p><p>形象地理解就是，ATM 机打印的纸质流水账单（stdout和stderr）本来应该你来保存处理的，但是你又没有用放在手里（打印屏幕）又碍事，所以账单从你的手里重新被丢到了垃圾桶（<code>/dev/null</code>）了。但是，垃圾桶的垃圾是怎么处理的你是不知道的。</p><p>不知道上面的描述，答主是不是能明白这三个知识点了？只要理解了上面的三个点，其实答主的第三个问题很好滴能解决了。</p><p>让一个变量获得命令输出的结果，是下面这样的处理：</p><pre><code class="sh">i=$(ls 123.txt)</code></pre><p>这样，<code>i</code> 就能获得命令 <code>ls 123.txt</code> 输出的标准输出。错误提示（标准错误）依然会打印到屏幕上显示。</p><pre><code class="sh">i=$(ls 123.txt 2&gt; /dev/null)</code></pre><p>这样的命令，<code>ls</code> 命令如果出现了错误提示，就会被重定向到 <code>/dev/null</code> 垃圾桶去了。所以，屏幕上不会打印任何输出关于错误的提示字符。在这个命令的操作中，<code>i</code> 获得文件 stdout 标准输出，也就是文件述符1的屏幕输出结果” <code>123.txt</code> “。</p><p>如果，这个 <code>123.txt</code> 文件不存在，<code>i</code> 就肯定什么都拿不到，因为错误提示被 <code>/dev/null</code> 吃了（划掉），被重定向丢弃了屏幕也不显示错误提示。所以，<code>i</code> 就是个什么都没有的空变量。基本就是如下效果一样：</p><pre><code class="sh">i=&#39;&#39;</code></pre><h4 id="存在的意义："><a href="#存在的意义：" class="headerlink" title="存在的意义："></a><strong>存在的意义：</strong></h4><p><code>/dev/null&gt; file</code> 的意义在与 要输出到的文件不会被删除就可以进行清空。如果你通过删除后在新建一个文件的方式来清空的话，可能由于权限的原因不能被删除获取新建。还有可能在你刚删除文件后，另外一个程序就需要读取这个文件，这时就会出现错误。</p><h2 id="关闭文件描述符"><a href="#关闭文件描述符" class="headerlink" title="关闭文件描述符"></a>关闭文件描述符</h2><p><a href="http://www.tldp.org/LDP/abs/html/io-redirection.html" target="_blank" rel="noopener">Chapter 20. I/O Redirection</a></p><pre><code class="sh">n&lt;&amp;-
Close input file descriptor n.

0&lt;&amp;-, &lt;&amp;-
Close stdin.

n&gt;&amp;-
Close output file descriptor n.

1&gt;&amp;-, &gt;&amp;-
Close stdout.</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文主要介绍了linux重定向的原理以及一些基本命令，并且详细地分析了 <code>&gt;/dev/null 2&gt;&amp;1</code> 这个命令以及一些注意点。</p><p>总而言之，平时用到最多的就是 <code>nohup command &gt;/dev/null 2&gt;&amp;1 &amp;</code> 命令</p><blockquote><p>此处保留原作者参考文献：</p><ul><li><a href="https://www.cnblogs.com/tinywan/p/6025468.html" target="_blank" rel="noopener">Shell脚本-/dev/null 2&gt;&amp;1详解</a></li><li><a href="http://blog.jobbole.com/109355/" target="_blank" rel="noopener">shell 中的&gt;/dev/null 2&gt;&amp;1 是什么鬼？</a></li><li><a href="http://www.cnblogs.com/chengmo/archive/2010/10/20/1855805.html" target="_blank" rel="noopener">linux重定向总结</a></li><li><a href="https://blog.csdn.net/reyleon/article/details/11595985" target="_blank" rel="noopener">&gt;/dev/null 2&gt;&amp;1 和 2&gt;&amp;1 &gt;/dev/null的区别</a></li><li><a href="https://www.zhihu.com/question/53295083" target="_blank" rel="noopener">shell程序中 2&gt; /dev/null 代表什么意思？</a></li><li><a href="https://blog.csdn.net/ithomer/article/details/9288353" target="_blank" rel="noopener">Linux Shell 1&gt;/dev/null 2&gt;&amp;1 含义</a></li><li><a href="https://askubuntu.com/questions/514748/what-does-dev-null-mean-in-a-shell-script" target="_blank" rel="noopener">What does /dev/null mean in a shell script?</a></li><li><a href="http://www.tldp.org/LDP/abs/html/io-redirection.html" target="_blank" rel="noopener">Chapter 20. I/O Redirection</a></li></ul></blockquote><img src="https://media.everdo.cn/tank/pic-bed/2021/04/09/4.png" alt="尾图4" style="zoom:33%"><blockquote style="margin:2em 0 0;padding:.5em 1em;border-left:3px solid #ebc43b;background-color:#191919;list-style:none"><p><strong>This blog is under a <a href="/creativecommons.html" target="_blank">CC BY-NC-ND 4.0 Unported License</a></strong><br><strong>本文链接：</strong><a href="https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/">https://coding.emptinessboy.com/2020/10/Linux-%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%88%E8%BD%AC%EF%BC%89/</a></p></blockquote></div><div id="comment" style="padding:10px" class="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return GUEST_INFO.indexOf(i)>-1}),notify=!1,verify=!0;new Valine({el:".vcomment",notify:notify,verify:verify,appId:"91mhcw0WK44B90nptmxGcJol-gzGzoHsz",appKey:"Boi7za0ClwGyWRCYd8osdf5o",placeholder:"在这里写点什么吧！",pageSize:"10",avatar:"monsterid",lang:"zh-cn",guest_info:guest_info})</script></div><nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col"><a href="/2020/11/%E4%BD%BF%E7%94%A8-WebStrom-%E6%9E%84%E5%BB%BA-Vue3-x-%E9%A1%B9%E7%9B%AE/" id="post_nav-newer" class="prev-content"><button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation"><i class="material-icons">arrow_back</i></button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 新篇</a><div class="section-spacer"></div><a href="/2020/10/%E5%9F%BA%E4%BA%8E-Hadoop-%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA-Hbase/" id="post_nav-older" class="next-content">旧篇 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation"><i class="material-icons">arrow_forward</i></button></a></nav></div></div><div class="sidebar-overlay"></div><aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation"><div id="sidebar-main"><div class="sidebar-header header-cover" style="background-image:url(/img/sidebar_header.jpg)"><div class="top-bar"></div><button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display:initial" data-upgraded=",MaterialButton,MaterialRipple"><i class="material-icons">clear_all</i> <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button><div class="sidebar-image"><img src="/img/fav_300.png" alt="EmptinessBoy's avatar"></div><a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">i@my.huxiaofan.com <b class="caret"></b></a></div><ul class="nav sidebar-nav"><li class="dropdown"><ul id="settings-dropdown" class="dropdown-menu"><li><a href="mailto:i@my.huxiaofan.com" target="_blank" title="Email 我"><i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i> Email 我</a></li></ul></li><li id="sidebar-first-li"><a href="/"><i class="material-icons sidebar-material-icons">home</i> 主页</a></li><li class="divider"></li><li class="dropdown"><a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown"><i class="material-icons sidebar-material-icons">inbox</i> 归档 <b class="caret"></b></a><ul class="dropdown-menu"><li><a class="sidebar_archives-link" href="/archives/2021/05/">五月 2021<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/04/">四月 2021<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/11/">十一月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/10/">十月 2020<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/09/">九月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/07/">七月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/06/">六月 2020<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/05/">五月 2020<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/04/">四月 2020<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/03/">三月 2020<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/02/">二月 2020<span class="sidebar_archives-count">4</span></a></li></ul></li><li class="dropdown"><a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown"><i class="material-icons sidebar-material-icons">chrome_reader_mode</i> 分类 <b class="caret"></b></a><ul class="dropdown-menu"><li><a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/CSS%E5%AD%A6%E4%B9%A0/">CSS学习<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/HTML%E5%AD%A6%E4%B9%A0/">HTML学习<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/Hadoop/">Hadoop<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/JAVAWEB/">JAVAWEB<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/JAVA%E5%AD%A6%E4%B9%A0/">JAVA学习<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/JS%E5%AD%A6%E4%B9%A0/">JS学习<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/Linux/">Linux<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/WEB%E6%A1%86%E6%9E%B6/">WEB框架<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/python%E5%85%A5%E9%97%A8/">python入门<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/">瞎折腾<span class="sidebar_archives-count">4</span></a></li></ul></li><li class="divider"></li><li><a href="https://huxiaofan.com" target="_blank" rel="noopener" title="生活博客"><i class="material-icons sidebar-material-icons">domain</i> 生活博客</a></li><li><a href="https://huxiaofan.com/about" target="_blank" rel="noopener" title="关于我"><i class="material-icons sidebar-material-icons">person</i> 关于我</a></li><li class="divider"></li><li><a href="/archives">文章总数 <span class="sidebar-badge">53</span></a></li></ul></div></aside><div id="back-to-top" class="toTop-wrap"><a href="#top" class="toTop"><i class="material-icons footer_top-i">expand_less</i></a></div><footer class="mdl-mini-footer" id="bottom"><div class="mdl-mini-footer--left-section sns-list"><a href="https://huxiaofan.com/go?url=https://twitter.com/huxiaofanhome/" target="_blank"><button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter"><span class="visuallyhidden">Twitter</span></button></a><a href="https://huxiaofan.com/go?url=https://www.facebook.com/profile.php?id=100013375578138" target="_blank"><button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook"><span class="visuallyhidden">Facebook</span></button></a><a href="https://git.huxiaofan.com/emptinessboy" target="_blank"><button class="mdl-mini-footer--social-btn social-btn footer-sns-github"><span class="visuallyhidden">Github</span></button></a><a href="https://huxiaofan.com/go/?url=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2NTc2MjgwMDQ=" target="_blank"><button class="mdl-mini-footer--social-btn social-btn footer-sns-bilibili"><span class="visuallyhidden">Bilibili</span></button></a><a href="https://huxiaofan.com/go/?url=https://t.me/emptinessboy" target="_blank"><button class="mdl-mini-footer--social-btn social-btn footer-sns-telegram"><span class="visuallyhidden">Telegram</span></button></a></div><div id="copyright">Copyright&nbsp;©&nbsp;<span year></span>&nbsp;帆的自留地<br><a href="http://huxiaofan.com" target="_blank" rel="noopener">晓帆</a>&nbsp;/&nbsp;<a href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow"> 浙ICP备20004121号</a></div><div class="mdl-mini-footer--right-section"><div><div class="footer-develop-div">Hexo Theme - <span class="footer-develop-a">Material</span></div></div></div></footer><script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==",!0)</script><script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==",!0)</script><script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==",!0)</script><script type="text/ls-javascript" id="NProgress-script">NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#82bcff'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #82bcff, 0 0 15px #82bcff'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#82bcff',
        'border-left-color': '#82bcff'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);</script><script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==",!0)</script><script type="text/ls-javascript" id="window-load">$(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })</script><script type="text/ls-javascript" id="lazy-load">// Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });</script><script>var copyrightNow=(new Date).getFullYear(),textContent=document.querySelector("span[year]");copyrightSince=2019,copyrightSince===copyrightNow||0===copyrightSince?textContent.textContent=copyrightNow:textContent.textContent=copyrightSince+" - "+copyrightNow,function(){for(var t=document.querySelectorAll('script[type="text/ls-javascript"]'),e=0;e<t.length;++e){var o=t[e];lsloader.runInlineScript(o.id,o.id)}}(),console.log("\n %c 帆's Life | https://huxiaofan.com | Theme Material %c \n","color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;","color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;")</script></main></div></body></html><!-- rebuild by neat -->