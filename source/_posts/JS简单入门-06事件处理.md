---
title: JS简单入门 06事件处理
date: 2020-03-30 20:23:59
category: JS学习
tags: javascript
thumbnail: https://media.everdo.cn/tank/pic-bed/2020/03/27/JavaScript-Web-Frameworks-Software.jpg
---

网页是由浏览器的内置对象组成的，如单选按钮、列表框、多选框等，事件是 JavaScript 与对象之间进行交互的桥梁，当某个事件发生时，通过它的处理函数执行相应的 JavaScript 代码，从而实现不同的功能。

## 概述

采用事件驱动是JavaScript 语言的一个最基本的特征。所谓的事件是指用户在访问页面时执行的操作。当浏览器探测到一个事件时，比如，单击鼠标或按键，它可以触发与这个事件相关联的 JavaScript 对象。

事件处理指的就是与事件关联的 JavaScript 对象，当与页面特定部分关联的事件发生时，事件处理器就会被调用。事件处理的过程通常分为三步，具体步骤如下：

- 发生事件
- 启动事件处理程序
- 事件处理程序作出反应

在上面的事件处理过程中，要想事件处理程序能够启动，必须调用事件处理程序。

## 事件处理程序

在 JavaScript 中，调用事件处理程序的方法有两种：

### JS 调用法

在 JavaScript 中调用事件处理程序，首先需要获得处理对象的引用，然后将要执行的处理函数赋值给对应的事件。

下面是一个具体案例：

```html
<button id="but">点击按钮</button>
<script type="text/javascript">
var but = document.getElementById("but");
but.onclick=function(){
	alert("哼哼哼！");	
}                    
</script>
```

<button id="but">点击按钮</button>
<script type="text/javascript">
var but = document.getElementById("but");
but.onclick=function(){
	alert("哼哼哼！");	
}                    
</script>

### HTML 调用法

在 HTML 中分配事件处理程序，只需要在 HTML 标记中添加相应的事件，并在其中执行要执行的代码或函数名即可

```html
<button onclick="alertHhh()">点击按钮</button>
<script type="text/javascript">
function alertHhh(){
	alert("哼哼哼！");	
}                    
</script>
```

<button onclick="alertHhh()">点击按钮</button>
<script type="text/javascript">
function alertHhh(){
	alert("哼哼哼！");	
}                    
</script>

## 鼠标事件

鼠标事件是指通过鼠标动作触发的事件，常用的如下：

事件|事件说明
---|---
onclick|鼠标单击时触发此事件
ondblcl1ck|鼠标双击时触发此事件
onmousedown|鼠标按下时触发此事件
onmouseup|鼠标弹起时触发此事件
onmouseover|鼠标移动到某个设置了此事件的元素上时触发此事件
onmousemove|鼠标移动时触发此事件
onmouseout|鼠标从某个设置了此事件的元素上离开时触发此事件

<p>
<div id="colorful" style="width:100px;height:50px;background-color:red">
</div>
</p>
<script>
var rect=document.getElementById("colorful");
rect.onmousemove=function(){
    rect.style.backgroundColor="yellow";
}
rect.onmouseout=function(){
    rect.style.backgroundColor="green";
}
rect.onclick=function(){
    rect.style.backgroundColor="red";
}
rect.ondblclick=function(){
    rect.style.backgroundColor="purple";
}
</script>

## 键盘事件

键盘事件是指通过键盘动作触发的事件，常用于检查用户向页面输入的内容。例如，用户在购物车输入商品数量时，可以使用 onkeyup 事件检查用户输入的数量信息是否合法。

事件|事件说明
---|---
onkeydown|当键盘上的某个按键被按下时触发此事件
onkeyup|当键盘上的某个按键被按下后弹起时触发此事件
onkeypress|当输入有效的字符按键时触发此事件

下面是一段校验键盘输入的示例代码：

```html
<script type="text/javascript">
function checkNum(obj){ 
	var num =  Number(obj.value);
	//判断是否是数字
	if(!num){
		alert('请输入正确的数字');
	}
}
</script>
<div class="all">
	<ul >
		<li>商品</li>
		<li>数量</li>
		<li>单位</li>
	</ul>
	<ul>
		<li>图书</li>
		<li><input type="text" id="num" onkeyup="checkNum(this)"></li>
		<li>册</li>
	</ul>
</div>
```

<style type="text/css">
.all{
    margin:20px auto!important;
    border:1px solid #000;
    background:#000;
    width:300px;
    height:100px;
    float:left;
}
.all ul{
    height:50px;
    line-height:50px;
    padding:10px 0 10px 0!important;
    margin:0!important;
    list-style:none;
}
.all li{
    text-align:center!important;;
    float:left;
    width:30%;
}
#num{width:50px;}
</style>
<script type="text/javascript">
function checkNum(obj){ 
	var num =  Number(obj.value);
	//判断是否是数字
	if(!num){
		alert('请输入正确的数字');
	}
}
</script>
<div class="all">
	<ul >
		<li>商品</li>
		<li>数量</li>
		<li>单位</li>
	</ul>
	<ul>
		<li>图书</li>
		<li><input type="text" id="num" onkeyup="checkNum(this)"></li>
		<li>册</li>
	</ul>
</div>

<p style="clear:both;"></p>

## 表单事件

表单事件是指通过表单触发的事件。例如在用户注册的表单中可以通过表单事件完成用户名合法性检查、唯—性检查、用户密码合法性检查等。

事件|事件说明
---|---
onblur|当前元素失去焦点时触发此事件
onchange|当前元素失去焦点并且元素内容发生改变时触发此事件
onfocus|当某个元素获得焦点时触发此事件
onreset|当表单被重置时触发此事件
onsubmit|当表单被提交时触发此事件

下面是表单事件的示例代码：

```html
<script type="text/javascript">
	function txtfocus(obj){
		obj.style.background="#ccc";
	}
	function txtblur(obj){
		obj.style.background="";
	}
</script>
<table>
	<tr>
		<td>用户名：</td>
		<td><input type="text" onfocus="txtfocus(this)" onBlur="txtblur(this)"/></td>
	</tr>
	<tr>
		<td>性别：</td>
		<td><input type="text" onfocus="txtfocus(this)" onBlur="txtblur(this)"/></td>
	</tr>
	<tr>
		<td>邮箱：</td>
		<td><input type="text" onfocus="txtfocus(this)" onBlur="txtblur(this)"/></td>
	</tr>
</table>
```

<script type="text/javascript">
	function txtfocus(obj){
		obj.style.background="#ccc";
	}
	function txtblur(obj){
		obj.style.background="";
	}
</script>
<table>
	<tr>
		<td>用户名：</td>
		<td><input type="text" onfocus="txtfocus(this)" onBlur="txtblur(this)"/></td>
	</tr>
	<tr>
		<td>性别：</td>
		<td><input type="text" onfocus="txtfocus(this)" onBlur="txtblur(this)"/></td>
	</tr>
	<tr>
		<td>邮箱：</td>
		<td><input type="text" onfocus="txtfocus(this)" onBlur="txtblur(this)"/></td>
	</tr>
</table>

上面的示例代码用于定义获取元素焦点后改变文本框的背景颜色，和失去焦点后文本框的背景颜色消失。

## 页面事件

页面事件是指通过页面触发的事件：

事件|事件说明
--|--
onload|当页面加载完成时触发此事件
onunload|当页面卸载时触发此事件

通常情况下，页面加载是从上到下依次进行的。那么如果JavaScript 脚本加载完成，并执行了一个方法，而该方法又操作了下面还未加载的某个元素对象，结果会导致报错。而使用 onload 方法可以很好解决这一点。

```html
语法格式 A：

<script type="text/javascript">
function show(){
	var con=document.getElementById('content')
	alert(con.innerHTML);
}
window.onload=show;
</script>
<div id="content">hello</div>
```

```html
语法格式 B：

<script type="text/javascript">
window.onload=function show(){
	var con=document.getElementById('content')
	alert(con.innerHTML);
}

</script>
<div id="content">hello</div>
```
